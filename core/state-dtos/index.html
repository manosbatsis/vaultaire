



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Query DSL and data access utilities for Corda developers.">
      
      
      
        <meta name="author" content="Manos Batsis">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>State DTOs - Vaultaire</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#00bcd4">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-131279953-1", "manosbatsis.github.io")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="cyan" data-md-color-accent="deep-purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#state-dtos" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Vaultaire" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Vaultaire
            </span>
            <span class="md-header-nav__topic">
              
                State DTOs
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/manosbatsis/vaultaire/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Vaultaire
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Vaultaire" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Vaultaire
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/manosbatsis/vaultaire/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Vaultaire
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Core Features
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Core Features
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../query-dsl/" title="Query DSL" class="md-nav__link">
      Query DSL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../state-services/" title="State Services" class="md-nav__link">
      State Services
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        State DTOs
      </label>
    
    <a href="./" title="State DTOs" class="md-nav__link md-nav__link--active">
      State DTOs
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-patterns" title="Usage Patterns" class="md-nav__link">
    Usage Patterns
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dto-to-state" title="DTO to State" class="md-nav__link">
    DTO to State
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dto-as-patch-update" title="DTO as Patch Update" class="md-nav__link">
    DTO as Patch Update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-to-dto" title="State to DTO" class="md-nav__link">
    State to DTO
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dto-generation" title="DTO Generation" class="md-nav__link">
    DTO Generation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#annotations" title="Annotations" class="md-nav__link">
    Annotations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local-states" title="Local States" class="md-nav__link">
    Local States
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependency-states" title="Dependency States" class="md-nav__link">
    Dependency States
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utility-annotations" title="Utility Annotations" class="md-nav__link">
    Utility Annotations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-dto" title="Sample DTO" class="md-nav__link">
    Sample DTO
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strategies" title="Strategies" class="md-nav__link">
    Strategies
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../other-utils/" title="Other Utilities" class="md-nav__link">
      Other Utilities
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Plugins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/corda-accounts/" title="Corda Accounts" class="md-nav__link">
      Corda Accounts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="/vaultaire/0.x/index.html" title="API Reference" class="md-nav__link">
      API Reference
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../changelog/" title="Change Log" class="md-nav__link">
      Change Log
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../credits/" title="Credits" class="md-nav__link">
      Credits
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-patterns" title="Usage Patterns" class="md-nav__link">
    Usage Patterns
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dto-to-state" title="DTO to State" class="md-nav__link">
    DTO to State
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dto-as-patch-update" title="DTO as Patch Update" class="md-nav__link">
    DTO as Patch Update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-to-dto" title="State to DTO" class="md-nav__link">
    State to DTO
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dto-generation" title="DTO Generation" class="md-nav__link">
    DTO Generation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#annotations" title="Annotations" class="md-nav__link">
    Annotations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local-states" title="Local States" class="md-nav__link">
    Local States
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependency-states" title="Dependency States" class="md-nav__link">
    Dependency States
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utility-annotations" title="Utility Annotations" class="md-nav__link">
    Utility Annotations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-dto" title="Sample DTO" class="md-nav__link">
    Sample DTO
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strategies" title="Strategies" class="md-nav__link">
    Strategies
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/manosbatsis/vaultaire/edit/master/docs/core/state-dtos.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="state-dtos">State DTOs<a class="headerlink" href="#state-dtos" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Maintaining Data Transfer Objects for your contract states can be a mundane, error-prone task. 
Vaultaire’s annotation processing automates this by (re)generating those DTOs for you.</p>
<h2 id="usage-patterns">Usage Patterns<a class="headerlink" href="#usage-patterns" title="Permanent link">&para;</a></h2>
<p>A typical use for generated DTOs is messaging over HTTP REST or RPC as 
input and output of Corda Flows. The provided conversion utilities 
can be used to create, update or even patch <code>ContractState</code> types 
they correspond to.  </p>
<h3 id="dto-to-state">DTO to State<a class="headerlink" href="#dto-to-state" title="Permanent link">&para;</a></h3>
<p>To convert from DTO to state, use the DTO&rsquo;s <code>toTargetType()</code> method:</p>
<div class="codehilite"><pre><span></span><span class="c1">// Using default strategy</span>
<span class="c1">// ----------------------</span>
<span class="c1">// Get the DTO</span>
<span class="k">val</span> <span class="py">dto1</span><span class="p">:</span> <span class="n">BookStateDto</span> <span class="p">=</span> <span class="c1">//...</span>
<span class="c1">// Convert to State</span>
<span class="k">val</span> <span class="py">state1</span><span class="p">:</span> <span class="n">BookState</span> <span class="p">=</span> <span class="n">dto1</span><span class="p">.</span><span class="n">toTargetType</span><span class="p">()</span>

<span class="c1">// Using &#39;lite&#39; strategy</span>
<span class="c1">// ----------------------</span>
<span class="c1">// Get the Service</span>
<span class="k">val</span> <span class="py">stateService</span><span class="p">:</span> <span class="n">BookStateService</span> <span class="p">=</span> <span class="c1">//...</span>
<span class="c1">// Get the &#39;lite&#39; DTO</span>
<span class="k">val</span> <span class="py">dto2</span><span class="p">:</span> <span class="n">BookStateLiteDto</span> <span class="p">=</span> <span class="c1">// ...</span>
<span class="c1">// Convert to State</span>
<span class="k">val</span> <span class="py">state2</span><span class="p">:</span> <span class="n">BookState</span> <span class="p">=</span> <span class="n">dto2</span><span class="p">.</span><span class="n">toTargetType</span><span class="p">(</span><span class="n">stateService</span><span class="p">)</span>
</pre></div>

<h3 id="dto-as-patch-update">DTO as Patch Update<a class="headerlink" href="#dto-as-patch-update" title="Permanent link">&para;</a></h3>
<p>DTOs can be used to transfer and apply a &ldquo;patch&rdquo; to update
an existing state:</p>
<div class="codehilite"><pre><span></span><span class="c1">// Get the Service</span>
<span class="k">val</span> <span class="py">stateService</span> <span class="p">=</span> <span class="n">BookStateService</span><span class="p">(</span><span class="n">serviceHub_or_RPCOps</span><span class="p">)</span>

<span class="c1">// Load state from Node Vault</span>
<span class="k">val</span> <span class="py">state</span><span class="p">:</span> <span class="n">BookState</span> <span class="p">=</span> <span class="n">stateService</span><span class="p">.</span><span class="n">getByLinearId</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>

<span class="c1">// Apply DTO as patch</span>
<span class="c1">// ----------------------</span>
<span class="k">val</span> <span class="py">patchedState1</span><span class="p">:</span> <span class="n">BookState</span> <span class="p">=</span> <span class="n">dto1</span><span class="p">.</span><span class="n">toPatched</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>

<span class="c1">// Apply &#39;lite&#39; DTO as patch</span>
<span class="c1">// ----------------------</span>
<span class="k">val</span> <span class="py">patchedState2</span><span class="p">:</span> <span class="n">BookState</span> <span class="p">=</span> <span class="n">dto2</span><span class="p">.</span><span class="n">toPatched</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">stateService</span><span class="p">)</span>
</pre></div>

<h3 id="state-to-dto">State to DTO<a class="headerlink" href="#state-to-dto" title="Permanent link">&para;</a></h3>
<p>To convert from state to DTO, use the DTO&rsquo;s latter&rsquo;s alternative, state-based constructor:</p>
<div class="codehilite"><pre><span></span><span class="c1">// Get the state</span>
<span class="k">val</span> <span class="py">state</span><span class="p">:</span> <span class="n">BookState</span> <span class="p">=</span> <span class="n">stateService</span><span class="p">.</span><span class="n">getByLinearId</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="c1">// Convert to DTO</span>
<span class="k">val</span> <span class="py">dto</span> <span class="p">=</span> <span class="n">BookStateDto</span><span class="p">.</span><span class="n">mapToDto</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</pre></div>

<h2 id="dto-generation">DTO Generation<a class="headerlink" href="#dto-generation" title="Permanent link">&para;</a></h2>
<p>This section explains the annotations and strategies involved in generating DTOs.</p>
<h3 id="annotations">Annotations<a class="headerlink" href="#annotations" title="Permanent link">&para;</a></h3>
<h4 id="local-states">Local States<a class="headerlink" href="#local-states" title="Permanent link">&para;</a></h4>
<p>To have Vaultaire generate DTOs for <code>ContractState</code>s within local (Gradle module) sources,
annotate them with <code>@VaultaireGenerateDto</code>:</p>
<div class="codehilite"><pre><span></span><span class="n">@VaultaireGenerateDto</span><span class="p">(</span>
    <span class="c1">// optional: properties to ignore</span>
    <span class="n">ignoreProperties</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;foo&quot;</span><span class="p">],</span>
    <span class="c1">// optional, default is false</span>
    <span class="n">includeParticipants</span> <span class="p">=</span> <span class="k">false</span>
<span class="p">)</span>
<span class="k">data</span> <span class="k">class</span> <span class="nc">BookState</span><span class="p">(</span>
    <span class="k">val</span> <span class="py">publisher</span><span class="p">:</span> <span class="n">Party</span><span class="p">,</span>
    <span class="k">val</span> <span class="py">author</span><span class="p">:</span> <span class="n">Party</span><span class="p">,</span>
    <span class="k">val</span> <span class="py">price</span><span class="p">:</span> <span class="n">BigDecimal</span><span class="p">,</span>
    <span class="k">val</span> <span class="py">genre</span><span class="p">:</span> <span class="n">Genre</span><span class="p">,</span>
    <span class="n">@DefaultValue</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">editions</span><span class="p">:</span> <span class="n">Int</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>
    <span class="k">val</span> <span class="py">title</span><span class="p">:</span> <span class="n">String</span> <span class="p">=</span> <span class="s">&quot;Uknown&quot;</span><span class="p">,</span>
    <span class="k">val</span> <span class="py">published</span><span class="p">:</span> <span class="n">Date</span> <span class="p">=</span> <span class="n">Date</span><span class="p">(),</span>
    <span class="n">@field</span><span class="p">:</span><span class="n">JsonProperty</span><span class="p">(</span><span class="s">&quot;alias&quot;</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">alternativeTitle</span><span class="p">:</span> <span class="n">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
    <span class="k">override</span> <span class="k">val</span> <span class="py">linearId</span><span class="p">:</span> <span class="n">UniqueIdentifier</span> <span class="p">=</span> <span class="n">UniqueIdentifier</span><span class="p">()</span>
<span class="p">)</span> <span class="p">:</span> <span class="n">LinearState</span><span class="p">,</span> <span class="n">QueryableState</span> <span class="p">{</span><span class="cm">/* ... */</span><span class="p">}</span>
</pre></div>

<h4 id="dependency-states">Dependency States<a class="headerlink" href="#dependency-states" title="Permanent link">&para;</a></h4>
<p>To generate DTOs for <code>ContractState</code>s outside the sources in context,
e.g. from a contract states module or a project dependency,
create a &ldquo;mixin&rdquo; class as a placeholder and annotate it with
<code>@VaultaireGenerateDtoForDependency</code>.</p>
<p>This approach might be preferred or necessary even for state sources in context or under your control,
e.g. when having (the good practice of) separate cordapp modules for contracts/states and flows.</p>
<p>Mixin example:</p>
<div class="codehilite"><pre><span></span><span class="n">@VaultaireGenerateDtoForDependency</span><span class="p">(</span>
    <span class="n">persistentStateType</span> <span class="p">=</span> <span class="n">PersistentBookState</span><span class="o">::</span><span class="k">class</span><span class="p">,</span>
    <span class="n">contractStateType</span> <span class="p">=</span> <span class="n">BookState</span><span class="o">::</span><span class="k">class</span><span class="p">,</span>
    <span class="c1">// optional: properties to ignore</span>
    <span class="n">ignoreProperties</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;foo&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="k">class</span> <span class="nc">BookStateMixin</span> <span class="c1">// just a placeholder for our annotation</span>
</pre></div>

<h4 id="utility-annotations">Utility Annotations<a class="headerlink" href="#utility-annotations" title="Permanent link">&para;</a></h4>
<p>The<code>@DefaultValue</code> can be used to provide default property initializers. 
It can be used equally on either <code>ContractState</code> or &ldquo;mixin&rdquo; properties:</p>
<div class="codehilite"><pre><span></span><span class="n">@VaultaireGenerateForDependency</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">)</span>
<span class="n">@VaultaireGenerateDtoForDependency</span><span class="p">(</span><span class="cm">/*...*/</span><span class="p">)</span>
<span class="k">data</span> <span class="k">class</span> <span class="nc">MagazineMixin</span><span class="p">(</span>
        <span class="n">@DefaultValue</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">)</span>
        <span class="k">var</span> <span class="py">issues</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span>
        <span class="n">@DefaultValue</span><span class="p">(</span><span class="s">&quot;Date()&quot;</span><span class="p">)</span>
        <span class="k">val</span> <span class="py">published</span><span class="p">:</span> <span class="n">Date</span><span class="p">,</span>
        <span class="n">@DefaultValue</span><span class="p">(</span><span class="s">&quot;UniqueIdentifier()&quot;</span><span class="p">)</span>
        <span class="k">val</span> <span class="py">linearId</span><span class="p">:</span> <span class="n">UniqueIdentifier</span>
<span class="p">)</span>
</pre></div>

<h4 id="sample-dto">Sample DTO<a class="headerlink" href="#sample-dto" title="Permanent link">&para;</a></h4>
<p>In both cases above the following DTO will be generated.
Note the nullable var members and utilities to convert between the two types
or to patch an existing state:</p>
<div class="codehilite"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * A [BookState]-specific [Dto] implementation</span>
<span class="cm"> */</span>
<span class="n">@CordaSerializable</span>
<span class="k">data</span> <span class="k">class</span> <span class="nc">BookStateDto</span><span class="p">(</span>
  <span class="k">var</span> <span class="py">publisher</span><span class="p">:</span> <span class="n">Party</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">author</span><span class="p">:</span> <span class="n">Party</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">price</span><span class="p">:</span> <span class="n">BigDecimal</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">genre</span><span class="p">:</span> <span class="n">BookContract</span><span class="p">.</span><span class="n">Genre</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">editions</span><span class="p">:</span> <span class="n">Int</span><span class="p">?</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">title</span><span class="p">:</span> <span class="n">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">published</span><span class="p">:</span> <span class="n">Date</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="n">@field</span><span class="p">:</span><span class="n">JsonProperty</span><span class="p">(</span><span class="n">value</span> <span class="p">=</span> <span class="s">&quot;alias&quot;</span><span class="p">)</span>
  <span class="k">var</span> <span class="py">alternativeTitle</span><span class="p">:</span> <span class="n">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">linearId</span><span class="p">:</span> <span class="n">UniqueIdentifier</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
<span class="p">)</span> <span class="p">:</span> <span class="n">Dto</span><span class="p">&lt;</span><span class="n">BookState</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="cm">/**</span>
<span class="cm">   * Alternative constructor, used to map </span>
<span class="cm">   * from the given [BookState] instance.</span>
<span class="cm">   */</span>
  <span class="k">constructor</span><span class="p">(</span><span class="n">original</span><span class="p">:</span> <span class="n">BookState</span><span class="p">)</span> <span class="p">:</span> <span class="k">this</span><span class="p">(</span>
        <span class="n">publisher</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">publisher</span><span class="p">,</span>
        <span class="n">author</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">author</span><span class="p">,</span>
        <span class="n">price</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">price</span><span class="p">,</span>
        <span class="n">genre</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">genre</span><span class="p">,</span>
        <span class="n">editions</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">editions</span><span class="p">,</span>
        <span class="n">title</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">title</span><span class="p">,</span>
        <span class="n">published</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">published</span><span class="p">,</span>
        <span class="n">alternativeTitle</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">alternativeTitle</span><span class="p">,</span>
        <span class="n">linearId</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">linearId</span>
  <span class="p">)</span>

  <span class="cm">/**</span>
<span class="cm">   * Create a patched copy of the given [BookState] instance,</span>
<span class="cm">   * updated using this DTO&#39;s non-null properties.</span>
<span class="cm">   */</span>
  <span class="k">override</span> <span class="k">fun</span> <span class="nf">toPatched</span><span class="p">(</span><span class="n">original</span><span class="p">:</span> <span class="n">BookState</span><span class="p">):</span> <span class="n">BookState</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">patched</span> <span class="p">=</span> <span class="n">BookState</span><span class="p">(</span>
          <span class="n">publisher</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">publisher</span> <span class="o">?:</span> <span class="n">original</span><span class="p">.</span><span class="n">publisher</span><span class="p">,</span>
          <span class="n">author</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">author</span> <span class="o">?:</span> <span class="n">original</span><span class="p">.</span><span class="n">author</span><span class="p">,</span>
          <span class="n">price</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">price</span> <span class="o">?:</span> <span class="n">original</span><span class="p">.</span><span class="n">price</span><span class="p">,</span>
          <span class="n">genre</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">genre</span> <span class="o">?:</span> <span class="n">original</span><span class="p">.</span><span class="n">genre</span><span class="p">,</span>
          <span class="n">editions</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">editions</span> <span class="o">?:</span> <span class="n">original</span><span class="p">.</span><span class="n">editions</span><span class="p">,</span>
          <span class="n">title</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">title</span> <span class="o">?:</span> <span class="n">original</span><span class="p">.</span><span class="n">title</span><span class="p">,</span>
          <span class="n">published</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">published</span> <span class="o">?:</span> <span class="n">original</span><span class="p">.</span><span class="n">published</span><span class="p">,</span>
          <span class="n">alternativeTitle</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">alternativeTitle</span> <span class="o">?:</span> <span class="n">original</span><span class="p">.</span><span class="n">alternativeTitle</span><span class="p">,</span>
          <span class="n">linearId</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">linearId</span> <span class="o">?:</span> <span class="n">original</span><span class="p">.</span><span class="n">linearId</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">patched</span>
  <span class="p">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Create an instance of [BookState], using this DTO&#39;s properties.</span>
<span class="cm">   * May throw a [DtoInsufficientStateMappingException] </span>
<span class="cm">   * if there is mot enough information to do so.</span>
<span class="cm">   */</span>
  <span class="k">override</span> <span class="k">fun</span> <span class="nf">toState</span><span class="p">():</span> <span class="n">BookState</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
       <span class="k">val</span> <span class="py">state</span> <span class="p">=</span> <span class="n">BookState</span><span class="p">(</span>
          <span class="n">publisher</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">publisher</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">author</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">author</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">price</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">price</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">genre</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">genre</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">editions</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">editions</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">title</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">title</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">published</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">published</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">alternativeTitle</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">alternativeTitle</span><span class="p">,</span>
          <span class="n">linearId</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">linearId</span><span class="o">!!</span>
       <span class="p">)</span>
       <span class="k">return</span> <span class="n">state</span>
    <span class="p">}</span>
    <span class="k">catch</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">Exception</span><span class="p">)</span> <span class="p">{</span>
       <span class="k">throw</span> <span class="n">DtoInsufficientStateMappingException</span><span class="p">(</span><span class="n">exception</span> <span class="p">=</span> <span class="n">e</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h3 id="strategies">Strategies<a class="headerlink" href="#strategies" title="Permanent link">&para;</a></h3>
<p>Both <code>@VaultaireGenerateDto</code> and <code>@VaultaireGenerateDtoForDependency</code> support generation strategy hints.
By default the strategy used is <code>VaultaireDtoStrategyKeys.DEFAULT</code>. The only additional strategy provided
is the more REST-friendly <code>VaultaireDtoStrategyKeys.LITE</code>. Using both, as in the following example,
will generate separate DTOs for each.</p>
<div class="codehilite"><pre><span></span><span class="n">@VaultaireGenerateDto</span><span class="p">(</span>
    <span class="n">ignoreProperties</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;foo&quot;</span><span class="p">],</span>
    <span class="n">strategies</span> <span class="p">=</span> <span class="p">[</span><span class="n">VaultaireDtoStrategyKeys</span><span class="p">.</span><span class="n">DEFAULT</span><span class="p">,</span> <span class="n">VaultaireDtoStrategyKeys</span><span class="p">.</span><span class="n">LITE</span><span class="p">])</span>
<span class="p">)</span>
<span class="k">data</span> <span class="k">class</span> <span class="nc">BookState</span><span class="p">(</span>
        <span class="c1">//...</span>
<span class="p">)</span> <span class="p">:</span> <span class="n">LinearState</span><span class="p">,</span> <span class="n">QueryableState</span><span class="p">{</span>
        <span class="c1">//...</span>
<span class="p">}</span>
</pre></div>

<p>The &ldquo;lite&rdquo; strategy is provided to help where deserialization would normally require
either a <code>ServiceHub</code> or <code>RpcOps</code>, e.g. when the target property is a <code>Party</code>,
in which case the DTO will use a more manageable type like <code>CordaX500Name</code>,
and require a service to convert to or patch a <code>ContractState</code> instance.
Note that &ldquo;lite&rdquo; DTO classnames will also have a <code>LiteDto</code> suffix. Here&rsquo;s the &ldquo;lite&rdquo;
DTO generated for the above example:</p>
<div class="codehilite"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * A [BookContract.BookState]-specific [com.github.manosbatsis.kotlin.utils.api.Dto] implementation</span>
<span class="cm"> */</span>
<span class="k">data</span> <span class="k">class</span> <span class="nc">BookStateLiteDto</span><span class="p">(</span>
  <span class="k">var</span> <span class="py">publisher</span><span class="p">:</span> <span class="n">CordaX500Name</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">author</span><span class="p">:</span> <span class="n">CordaX500Name</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">price</span><span class="p">:</span> <span class="n">BigDecimal</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">genre</span><span class="p">:</span> <span class="n">BookContract</span><span class="p">.</span><span class="n">Genre</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">editions</span><span class="p">:</span> <span class="n">Int</span><span class="p">?</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">title</span><span class="p">:</span> <span class="n">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">published</span><span class="p">:</span> <span class="n">Date</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="n">@field</span><span class="p">:</span><span class="n">JsonProperty</span><span class="p">(</span><span class="n">value</span> <span class="p">=</span> <span class="s">&quot;alias&quot;</span><span class="p">)</span>
  <span class="k">var</span> <span class="py">alternativeTitle</span><span class="p">:</span> <span class="n">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
  <span class="k">var</span> <span class="py">linearId</span><span class="p">:</span> <span class="n">UniqueIdentifier</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
<span class="p">)</span> <span class="p">:</span> <span class="n">VaultaireDto</span><span class="p">&lt;</span><span class="n">BookContract</span><span class="p">.</span><span class="n">BookState</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="cm">/**</span>
<span class="cm">   * Alternative constructor, used to map</span>
<span class="cm">   * from the given [BookContract.BookState] instance.</span>
<span class="cm">   */</span>
  <span class="k">constructor</span><span class="p">(</span><span class="n">original</span><span class="p">:</span> <span class="n">BookContract</span><span class="p">.</span><span class="n">BookState</span><span class="p">)</span> <span class="p">:</span> <span class="k">this</span><span class="p">(</span>
        <span class="n">publisher</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">publisher</span><span class="p">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">author</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">author</span><span class="p">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">price</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">price</span><span class="p">,</span>
        <span class="n">genre</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">genre</span><span class="p">,</span>
        <span class="n">editions</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">editions</span><span class="p">,</span>
        <span class="n">title</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">title</span><span class="p">,</span>
        <span class="n">published</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">published</span><span class="p">,</span>
        <span class="n">alternativeTitle</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">alternativeTitle</span><span class="p">,</span>
        <span class="n">linearId</span> <span class="p">=</span> <span class="n">original</span><span class="p">.</span><span class="n">linearId</span>
  <span class="p">)</span>

  <span class="cm">/**</span>
<span class="cm">   * Create a patched copy of the given [BookContract.BookState] instance,</span>
<span class="cm">   * updated using this DTO&#39;s non-null properties.</span>
<span class="cm">   */</span>
  <span class="k">override</span> <span class="k">fun</span> <span class="nf">toPatched</span><span class="p">(</span><span class="n">original</span><span class="p">:</span> <span class="n">BookContract</span><span class="p">.</span><span class="n">BookState</span><span class="p">,</span>
      <span class="n">stateService</span><span class="p">:</span> <span class="n">StateService</span><span class="p">&lt;</span><span class="n">BookContract</span><span class="p">.</span><span class="n">BookState</span><span class="p">&gt;):</span> <span class="n">BookContract</span><span class="p">.</span><span class="n">BookState</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">patched</span> <span class="p">=</span> <span class="n">BookContract</span><span class="p">.</span><span class="n">BookState</span><span class="p">(</span>
          <span class="n">publisher</span> <span class="p">=</span> <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">publisher</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="n">stateService</span><span class="p">.</span><span class="n">wellKnownPartyFromX500Name</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">publisher</span><span class="o">!!</span><span class="p">)</span><span class="o">!!</span> <span class="k">else</span> <span class="n">original</span><span class="p">.</span><span class="n">publisher</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">author</span> <span class="p">=</span> <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">author</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span> <span class="n">stateService</span><span class="p">.</span><span class="n">wellKnownPartyFromX500Name</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">author</span><span class="o">!!</span><span class="p">)</span><span class="o">!!</span>
        <span class="k">else</span> <span class="n">original</span><span class="p">.</span><span class="n">author</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">price</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">price</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">genre</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">genre</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">editions</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">editions</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">title</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">title</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">published</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">published</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">alternativeTitle</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">alternativeTitle</span><span class="p">,</span>
          <span class="n">linearId</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">linearId</span><span class="o">!!</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">patched</span>
  <span class="p">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Create an instance of [BookContract.BookState], using this DTO&#39;s properties.</span>
<span class="cm">   * May throw a [DtoInsufficientStateMappingException]</span>
<span class="cm">   * if there is mot enough information to do so.</span>
<span class="cm">   */</span>
  <span class="k">override</span> <span class="k">fun</span> <span class="nf">toTargetType</span><span class="p">(</span><span class="n">stateService</span><span class="p">:</span> <span class="n">StateService</span><span class="p">&lt;</span><span class="n">BookContract</span><span class="p">.</span><span class="n">BookState</span><span class="p">&gt;):</span>
      <span class="n">BookContract</span><span class="p">.</span><span class="n">BookState</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
       <span class="k">val</span> <span class="py">originalTypeInstance</span> <span class="p">=</span> <span class="n">BookContract</span><span class="p">.</span><span class="n">BookState</span><span class="p">(</span>
          <span class="n">publisher</span> <span class="p">=</span> <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">publisher</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="n">stateService</span><span class="p">.</span><span class="n">wellKnownPartyFromX500Name</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">publisher</span><span class="o">!!</span><span class="p">)</span><span class="o">!!</span> <span class="k">else</span> <span class="k">throw</span>
        <span class="n">DtoInsufficientMappingException</span><span class="p">(</span><span class="s">&quot;No value given for property publisher&quot;</span><span class="p">),</span>
          <span class="n">author</span> <span class="p">=</span> <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">author</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span> <span class="n">stateService</span><span class="p">.</span><span class="n">wellKnownPartyFromX500Name</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">author</span><span class="o">!!</span><span class="p">)</span><span class="o">!!</span>
        <span class="k">else</span> <span class="k">throw</span> <span class="n">DtoInsufficientMappingException</span><span class="p">(</span><span class="s">&quot;No value given for property author&quot;</span><span class="p">),</span>
          <span class="n">price</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">price</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">genre</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">genre</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">editions</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">editions</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">title</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">title</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">published</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">published</span><span class="o">!!</span><span class="p">,</span>
          <span class="n">alternativeTitle</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">alternativeTitle</span><span class="p">,</span>
          <span class="n">linearId</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">linearId</span><span class="o">!!</span>
       <span class="p">)</span>
       <span class="k">return</span> <span class="n">originalTypeInstance</span>
    <span class="p">}</span>
    <span class="k">catch</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">Exception</span><span class="p">)</span> <span class="p">{</span>
       <span class="k">throw</span> <span class="n">DtoInsufficientMappingException</span><span class="p">(</span><span class="n">exception</span> <span class="p">=</span> <span class="n">e</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../state-services/" title="State Services" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                State Services
              </span>
            </div>
          </a>
        
        
          <a href="../other-utils/" title="Other Utilities" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Other Utilities
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 Manos Batsis
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>